<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Back Office</title>
		<link href="ressources/css/BackOffice.css" rel="stylesheet">
	</head>

	<script>
	function searchInTable(inputName, tableName, searchType) {
		let input,
			filter,
			table,
			tr,
			td,
			i,
			txtValue;
		input = document.getElementById(inputName);
		filter = input.value.toUpperCase();
		table = document.getElementById(tableName);
		value = document.getElementById(searchType).selectedIndex;
		tr = table.getElementsByTagName("tr");

		for (i = 0; i < tr.length; i++) {
			td = tr[i].getElementsByTagName("td")[value];
			if (td) {
				txtValue = td.textContent || td.innerText;
				if (txtValue.toUpperCase().indexOf(filter) > -1) {
					tr[i].style.display = "";
				} else {
					tr[i].style.display = "none";
				}
			}
		}
	}
	</script>

	<body>
		<div class="main-layout">
			<div class="title">
				<div class="title-text">
					Les entreprises
				</div>
			</div>
			<div class="layout-search">
				<label>Rechercher :</label>
				<div class="datalist-search">
					<select id="searchTypeEnt" name="searchTypeEnt">
						<option value="raisonSociale">Raison Sociale</option>
						<option value="address">Adresse</option>
						<option value="postalCode">Code Postal</option>
						<option value="city">Ville</option>
						<option value="country">Pays</option>
					</select>
					<input autofocus type="text" id="entreprises" onkeyup="searchInTable('entreprises', 'tableEntreprises', 'searchTypeEnt')"/>
				</div>

				<div class="button-edit-company">
					<button class="button" id="add">Ajouter une entreprise</button>
					<button class="button" id="delete">Supprimer une entreprise</button>
					<button class="button" id="edit">Modifier une entreprise</button>
				</div>
				<div
					class="users">
					{# SECTION Liste de l'entreprise #}

					<div class="entreprise-list">

						<div class="table-list-entreprises">
							<table id="tableEntreprises">
								<tr>
									<th>Raison Sociale</th>
									<th>Adresse</th>
									<th>Code Postal</th>
									<th>Ville</th>
									<th>Pays</th>

									<th id="last">Option accepter</th>
								</tr>
								<tr>
									{% for entreprise in entreprise %}
										<tr>
											<td>{{ entreprise.ent_rs }}</td>
											<td>{{ entreprise.ent_adresse }}</td>
											<td>{{ entreprise.ent_cp }}</td>
											<td>{{ entreprise.ent_ville }}</td>
											<td>{{ entreprise.ent_pays }}</td>
										</tr>
									{% endfor %}

								</tr>
							</table>
						</div>
						<hr class="line">
						<div class="container-user">
							<div class="title-text">
								Liste des utilisateurs
							</div>
						</div>
						<div class="layout-search">
							<label>Rechercher :</label>
							<div class="datalist-search">
								<select id="searchTypeUti" name="searchTypeUti">
									<option value="username">Nom d'utilisateur</option>
									<option value="role">Rôle</option>
									<option value="email">Email</option>
									<option value="tel">Téléphone</option>
								</select>
								<input type="text" id="utilisateurs" onkeyup="searchInTable('utilisateurs', 'tableUtilisateurs', 'searchTypeUti')"/>
							</div>
							<div class="button-edit-company">
								<button class="button" id="add">Ajouter un utilisateur</button>
								<button class="button" id="delete">Supprimer un utilisateur</button>
								<button class="button" id="edit">Modifier un utilisateur</button>
							</div>
						</div>
						<div class="tableau-user">
							<table id="tableUtilisateurs">
								<tr>
									<th>Nom d'utilisateur</th>
									<th>Role</th>
									<th>Email</th>
									<th>Téléphone</th>
								</tr>
								<tr>
									{% for user in user %}
										<tr>
											<td>{{ user.uti_username }}</td>
										</tr>
									{% endfor %}
								</tr>
							</table>
						</div>
					</div>
					<div class="Tuteurs">
						<div class="title-text">
							Liste des tuteurs
						</div>
						<div class="layout-search">
							<label>Rechercher :</label>
							<div class="datalist-search">
								<select id="searchTypeTut" name="searchTypeTut">
									<option value="nom">Nom</option>
									<option value="prenom">Prénom</option>
									<option value="email">Email</option>
									<option value="tel">Téléphone</option>
								</select>
								<input type="search" name="tuteurs" id="tuteurs" onkeyup="searchInTable('tuteurs', 'tuteursTable', 'searchTypeTut')">
							</div>
							<div class="button-edit-company">
								<button class="button" id="add">Ajouter un tuteur</button>
								<button class="button" id="delete">Supprimer un tuteur</button>
								<button class="button" id="edit">Modifier un tuteur</button>
							</div>
						</div>
						<div class="tableau-user">
							<table id="tuteursTable">
								<tr>
									<th>Nom</th>
									<th>Prénom</th>
									<th>Email</th>
									<th>Téléphone</th>
								</tr>
								<tr>
									{% for personne in personne %}
										<tr>
											<td>{{ personne.per_nom }}</td>
											<td>{{ personne.per_prenom }}</td>
											<td>{{ personne.per_mail }}</td>
											<td>{{ personne.per_tel }}</td>
										</tr>
									{% endfor %}
								</tr>
							</table>
						</div>

					</body>
				</html>
